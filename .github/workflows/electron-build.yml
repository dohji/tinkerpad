name: Electron Build & Release

on:
push:
branches:
  - main
  - release/*

jobs:
build:
runs-on: ${{ matrix.os }}

strategy:
  matrix:
    os: [macos-latest, windows-latest, ubuntu-latest]

steps:
  - name: Checkout Repository
    uses: actions/checkout@v4

  - name: Setup Node.js
    uses: actions/setup-node@v4
    with:
      node-version: 20 # Using a stable LTS version of Node.js

  - name: Install Dependencies
    run: npm ci

  - name: Build for macOS
    if: matrix.os == 'macos-latest'
    run: npm run make:mac

  - name: Build for Windows
    if: matrix.os == 'windows-latest'
    run: npm run make:win

  - name: Build for Linux
    if: matrix.os == 'ubuntu-latest'
    run: npm run make:linux

  - name: Upload Artifacts
    uses: actions/upload-artifact@v4
    with:
      name: tinkerpad-builds-${{ matrix.os }}
      path: out/

